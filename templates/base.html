{% comment %}
This is the master base template for the entire Laureon MRP application.

All other templates should extend this file and fill in the defined blocks.
It provides the core HTML structure, including the header, main content area,
and global CSS/JavaScript assets.

Available Blocks:
  - title: The title of the HTML page. Defaults to "Laureon MRP".
  - extra_css: For including additional, page-specific stylesheets.
  - page_actions_top: A slot for action buttons above the main content card.
  - page_title: The main H1 title displayed at the top of the page.
  - page_actions: A slot for action buttons next to the page title.
  - content: The main content of the page.
  - extra_js: For including additional, page-specific JavaScript files.
{% endcomment %}

{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Laureon SLM{% endblock title %}</title>

    {# --- Fonts & Icons --- #}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    {# --- Global Stylesheets --- #}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/forms.css' %}">

    {# --- Page-Specific Stylesheet Block --- #}
    {% block extra_css %}{% endblock extra_css %}
</head>
<body>

    <header class="site-header">
        <a href="{% url 'main_menu:main_menu' %}" class="logo-link">
            <div class="logo">
                <span class="logo-laureon">Laureon</span>
                <span class="logo-slm">SLM</span>
            </div>
        </a>
        <div class="user-info">
            {% if user.is_authenticated %}
                <span class="current-user">Logged in as: {{ user.username }}</span>
                <form action="{% url 'users:logout' %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn-icon btn-icon-blue" title="Logout" aria-label="Logout">
                        <span class="material-symbols-outlined">logout</span>
                    </button>
                </form>
            {% endif %}
        </div>
    </header>

    <main class="main-content">
        {# --- Django Messages Framework --- #}
        {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                    <div class="message {{ message.tags }}">
                        {{ message }}
                        <button type="button" class="message-close" aria-label="Close message">&times;</button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <div class="content-card">
            {# --- Top Action Buttons (e.g., "Back" button) --- #}
            {% block page_actions_top %}{% endblock page_actions_top %}

            <div class="page-header">
                <h1 class="page-title">
                    {# --- Main Page Title --- #}
                    {% block page_title %}{% endblock page_title %}
                </h1>
                <div class="page-actions">
                    {# --- Action Buttons Next to Title --- #}
                    {% block page_actions %}{% endblock page_actions %}
                </div>
            </div>

            <div class="page-content">
                {# --- Main Page Content --- #}
                {% block content %}{% endblock content %}
            </div>
        </div>
    </main>

    {# --- Global JavaScript --- #}
    <script src="{% static 'js/main.js' %}"></script>

    {# --- Page-Specific JavaScript Block --- #}
    {% block extra_js %}{% endblock extra_js %}
</body>
</html>